{"version":3,"sources":["components/ProgressBar.js","hooks/useMedia.js","hooks/useLocalStorage.js","hooks/useDarkMode.js","components/Sidebar.js","components/Loading.js","utils/date.js","utils/dom.js","components/post-list/index.js","hooks/useArticles.js","hooks/useScrollHistory.js","views/Home.js","views/Post.js","views/About.js","hooks/useEventListener.js","hooks/useScroll.js","App.js","serviceWorker.js","index.js"],"names":["ProgressBar","className","queries","values","defaultValue","mediaQueryLists","map","q","window","matchMedia","getValue","index","findIndex","mql","matches","useState","value","setValue","useEffect","handler","forEach","addListener","removeListener","useLocalStorage","key","initialValue","item","localStorage","getItem","JSON","parse","error","console","log","storedValue","setStoredValue","valueToStore","Function","setItem","stringify","enabledState","setEnabledState","prefersDarkMode","useMedia","enabled","element","document","body","classList","add","remove","Sidebar","useDarkMode","enableDarkMode","to","title","href","target","rel","onClick","Loading","isValidDate","date","Date","isNaN","pad","data","tmpVal","Number","toString","getLocalYearMonthDay","d","year","getFullYear","month","getMonth","getDate","hour","getHours","minute","getMinutes","second","getSeconds","parseDatetime","scrollSmoothTo","position","getComputedStyle","scrollBehavior","requestAnimationFrame","callback","setTimeout","step","scrollTop","distance","nextScrollTop","Math","max","min","abs","style","List","posts","slug","id","createDate","dangerouslySetInnerHTML","__html","intro","backgroundImage","thumb","cache","refresh","useArticles","articles","setArticles","fetch","then","r","a","ok","json","useArticle","find","_","article","setArticle","historyMap","useScrollHistory","location","useLocation","documentElement","pathname","Home","filter","Post","useParams","content","useEventListener","eventName","savedHandler","useRef","current","addEventListener","eventListener","event","removeEventListener","useScroll","BackToTop","Boolean","hostname","match","ReactDOM","render","exact","path","component","About","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.ac40aa6a.chunk.js","sourcesContent":["import React from 'react';\n\nexport default function ProgressBar () {\n  return (\n    <div className='progress-bar'>\n      <div className='bg-red'></div>\n      <div className='bg-orange'></div>\n      <div className='bg-yellow'></div>\n      <div className='bg-green'></div>\n      <div className='bg-blue'></div>\n      <div className='bg-indigo'></div>\n      <div className='bg-purple'></div>\n    </div>\n  )\n}","import { useState, useEffect } from 'react'\n\nexport default (queries, values, defaultValue) => {\n  const mediaQueryLists = queries.map(q => window.matchMedia(q))\n\n  const getValue = () => {\n    const index = mediaQueryLists.findIndex(mql => mql.matches)\n    return typeof values[index] !== 'undefined' ? values[index] : defaultValue\n  }\n\n  const [value, setValue] = useState(getValue)\n\n  useEffect(\n    () => {\n      const handler = () => setValue(getValue)\n      mediaQueryLists.forEach(mql => mql.addListener(handler))\n      return () => mediaQueryLists.forEach(mql => mql.removeListener(handler))\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  )\n\n  return value\n}","import { useState } from 'react'\n\nconst useLocalStorage = (key, initialValue) => {\n  const [storedValue, setStoredValue] = useState(() => {\n    try {\n      const item = window.localStorage.getItem(key)\n      return item ? JSON.parse(item) : initialValue\n    } catch (error) {\n      console.log(error)\n      return initialValue\n    }\n  })\n\n  const setValue = value => {\n    try {\n      const valueToStore =\n        value instanceof Function ? value(storedValue) : value\n      setStoredValue(valueToStore)\n      window.localStorage.setItem(key, JSON.stringify(valueToStore))\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  return [storedValue, setValue]\n}\n\nexport default useLocalStorage\n","import { useEffect } from 'react'\nimport useMedia from './useMedia'\nimport useLocalStorage from './useLocalStorage'\n\nfunction usePerfersDarkMode () {\n  return useMedia(['(prefers-color-scheme: dark'], [true], false)\n}\n\nexport default () => {\n  const [enabledState, setEnabledState] = useLocalStorage('dark-mode-enabled')\n\n  const prefersDarkMode = usePerfersDarkMode()\n\n  const enabled =\n    typeof enabledState !== 'undefined' ? enabledState : prefersDarkMode\n\n  useEffect(\n    () => {\n      const className = 'dark-mode'\n      const element = window.document.body\n      if (enabled) {\n        element.classList.add(className)\n      } else {\n        element.classList.remove(className)\n      }\n    },\n    [enabled]\n  )\n\n  return [enabled, setEnabledState]\n}\n","import React from 'react';\nimport {\n  Link,\n} from \"react-router-dom\";\nimport useDarkMode from '../hooks/useDarkMode'\n\nexport default function Sidebar () {\n  const [enabled, enableDarkMode] = useDarkMode()\n\n  return (\n    <div className='sidebar text-left'>\n      <h1>\n        <Link className='logo' to='/'>打开天眼看文章</Link>\n      </h1>\n      <p>TECH | LIFE | X</p>\n      <p className='font-sm'>\n        <Link className='text-blue' to='/about' title='about me'>@me |</Link>\n        <a className='text-green' href='https://github.com/xiao555' title='github' target='_blank' rel='noopener noreferrer'>@github</a>\n      </p>\n      <p className='font-sm'>\n        <a href='mailto:zhangruiwu32@gmail.com'>zhangruiwu32@gmail.com</a>\n      </p>\n      <button className='border-0 px-0' onClick={() => enableDarkMode(!enabled)}>\n        {\n          enabled ? <i className='fas fa-sun'></i> : <i className='fas fa-moon'></i>\n        }\n        {/* <svg width=\"14\" height=\"14\" class=\"FontsNinjaExt-main-jss16\"><path d=\"M11.95 2.05A6.954 6.954 0 0 0 7 0C5.13 0 3.373.728 2.05 2.05A6.952 6.952 0 0 0 0 7c0 1.87.728 3.627 2.05 4.95A6.954 6.954 0 0 0 7 14c1.87 0 3.627-.728 4.95-2.05A6.954 6.954 0 0 0 14 7c0-1.87-.728-3.627-2.05-4.95zm-1.12 1.051L3.102 10.83A5.426 5.426 0 0 1 1.534 7a5.43 5.43 0 0 1 1.601-3.865A5.43 5.43 0 0 1 7 1.535c1.444 0 2.802.556 3.83 1.566z\" fill=\"#037D5E\" fill-rule=\"evenodd\"></path></svg> */}\n      </button>\n    </div>\n  )\n}","import React from 'react';\n\nfunction Loading() {\n  return (\n    <h1>Loading...</h1>\n  )\n}\n\nexport default Loading\n","function isValidDate (date) {\n  return date instanceof Date && !isNaN(date)\n}\n\nfunction pad(data) {\n  let tmpVal = Number(data)\n  if (tmpVal < 10) {\n    return '0' + tmpVal;\n  }\n  return tmpVal.toString();\n}\n\nfunction parseDatetime (value) {\n  if (!isValidDate(value)) return {}\n  return {\n    year: value.getFullYear(),\n    month: pad(value.getMonth() + 1), // 月份取值0-11\n    date: pad(value.getDate()),\n    hour: pad(value.getHours()),\n    minute: pad(value.getMinutes()),\n    second: pad(value.getSeconds())\n  }\n}\n\nexport function getLocalYearMonthDay (value) {\n  let d = new Date(value)\n  if (!isValidDate(d)) return value\n  const { year, month, date } = parseDatetime(d)\n  return `${year}-${month}-${date}`\n}","/**\n * 平滑滚动到指定位置\n * @param {Element} element - 平滑滚动的元素\n * @param {Number} position - 滚动到的位置\n */\nexport const scrollSmoothTo = (element, position) => {\n  if (typeof window.getComputedStyle(document.body).scrollBehavior === 'undefined') {\n    if (!window.requestAnimationFrame) {\n      window.requestAnimationFrame = function (callback, element) {\n        return setTimeout(callback, 17)\n      }\n    }\n    const step = () => {\n      const scrollTop = element.scrollTop\n      const distance = position - scrollTop\n      const nextScrollTop = scrollTop + (distance >= 0 ? Math.max(distance / 5, 1) : Math.min(distance / 5, -1))\n      if (Math.abs(position - scrollTop) <= 1) {\n        element.scrollTop = position\n      } else {\n        element.scrollTop = nextScrollTop\n        requestAnimationFrame(step)\n      }\n    }\n    step()\n  } else {\n    element.style.scrollBehavior = 'smooth'\n    element.scrollTop = position\n  }\n}\n","import React from 'react'\nimport './style.css'\nimport { Link } from \"react-router-dom\"\nimport { getLocalYearMonthDay } from '../../utils'\n\nfunction List({ posts }) {\n  return (\n    posts.map(item =>\n      <Link to={`/post/${item.slug}`} key={item.id}>\n        <article className='post-list-item'>\n          <div className='post-list-item-info'>\n            <h2>{ item.title }</h2>\n            <p><small>{ getLocalYearMonthDay(item.createDate) }</small></p>\n            <p dangerouslySetInnerHTML={{ __html: item.intro }}></p>\n          </div>\n          <div className='post-list-item-thumb-wrapper'>\n            <div className='post-list-item-thumb' style={{ backgroundImage: `url(${item.thumb})` }}></div>\n          </div>\n        </article>\n      </Link>\n    )\n  )\n}\n\nexport default List\n","import { useState, useEffect } from 'react'\nimport useLocalStorage from './useLocalStorage'\n\nconst url = 'https://raw.githubusercontent.com/xiao555/blog-articles/master/articles.json'\n\nlet cache = null\nlet refresh = false\n\nconst useArticles = () => {\n  const [articles, setArticles] = useLocalStorage('articles', cache)\n\n  if (!refresh) {\n    refresh = true\n    fetch(url)\n      .then(async r => {\n        if (r.ok) {\n          setArticles(await r.json())\n          cache = articles\n        } else {\n          refresh = false\n        }\n      })\n  }\n\n  return { articles }\n}\n\nconst useArticle = (id) => {\n  const { articles } = useArticles()\n  const [article, setArticle] = useState(articles ? articles.find(_ => _.id === id) : null)\n\n  useEffect(() => {\n    if (articles) {\n      const item = articles.find(_ => _.id === id)\n      if (item) {\n        setArticle(item)\n      } else {\n        setArticle(null)\n      }\n    }\n  }, [articles, id])\n  return article\n}\n\nexport { useArticles, useArticle }","import { useEffect } from 'react'\nimport { useLocation } from \"react-router-dom\"\n\nlet historyMap = JSON.parse(window.localStorage.getItem('scroll-history')) || {}\n\nconst useScrollHistory = () => {\n  const location = useLocation()\n\n  useEffect(() => {\n    document.documentElement.scrollTop = historyMap[location.pathname] || 0\n    return () => {\n      const scrollTop = document.documentElement.scrollTop\n      historyMap[location.pathname] = scrollTop\n      window.localStorage.setItem('scroll-history', JSON.stringify(historyMap))\n    }\n  })\n}\n\nexport { useScrollHistory }\n","import React from 'react';\nimport Loading from '../components/Loading'\nimport PostList from '../components/post-list/index.js'\nimport { useArticles } from '../hooks/useArticles'\nimport { useScrollHistory } from '../hooks/useScrollHistory'\n\nfunction Home() {\n  const { articles } = useArticles()\n\n  useScrollHistory()\n\n  return (\n    articles\n      ? <div className='main-content'>\n          <PostList posts={articles.filter(item => item.id !== 'about-me')}/>\n        </div>\n      : <Loading />\n  )\n}\n\nexport default Home;\n","import React from 'react';\nimport { useParams } from \"react-router-dom\";\nimport Loading from '../components/Loading'\nimport { getLocalYearMonthDay } from '../utils'\nimport { useArticle } from '../hooks/useArticles'\nimport { useScrollHistory } from '../hooks/useScrollHistory'\n\nfunction Post() {\n  const { id } = useParams()\n  const article = useArticle(id)\n\n  useScrollHistory()\n\n  return (\n    article\n      ? <article className='main-content'>\n          <h2>{ article.title }</h2>\n          <p><small>{ getLocalYearMonthDay(article.createDate) }</small></p>\n          <p dangerouslySetInnerHTML={{ __html: article.content }}></p>\n        </article>\n      : <Loading />\n  );\n}\n\nexport default Post;\n","import React from 'react';\nimport Loading from '../components/Loading'\nimport { getLocalYearMonthDay } from '../utils'\nimport { useArticle } from '../hooks/useArticles'\nimport { useScrollHistory } from '../hooks/useScrollHistory'\n\nfunction Post() {\n  const article = useArticle('about-me')\n\n  useScrollHistory()\n\n  return (\n    article\n      ? <article className='main-content'>\n          <h2>{ article.title }</h2>\n          <p><small>{ getLocalYearMonthDay(article.createDate) }</small></p>\n          <p dangerouslySetInnerHTML={{ __html:article.content }}></p>\n        </article>\n      : <Loading />\n  );\n}\n\nexport default Post;\n","import { useRef, useEffect } from 'react'\n\nconst useEventListener = (eventName, handler, element = window) => {\n  const savedHandler = useRef()\n\n  useEffect(() => {\n    savedHandler.current = handler\n  }, [handler])\n\n  useEffect(() => {\n    const isSupported = element && element.addEventListener\n    if (!isSupported) return\n\n    const eventListener = event => savedHandler.current(event)\n\n    element.addEventListener(eventName, eventListener)\n\n    return () => {\n      element.removeEventListener(eventName, eventListener)\n    }\n  }, [eventName, element])\n}\n\n\nexport default useEventListener","import { useState } from 'react'\nimport  useEventListener from './useEventListener'\n\nconst useScroll = (element = document.documentElement) => {\n  const [value, setValue] = useState(element.scrollTop)\n\n  const handler = () => {\n    setValue(element.scrollTop)\n  }\n\n  useEventListener('scroll', handler)\n\n  return [value]\n}\n\nexport default useScroll","import React from \"react\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n} from \"react-router-dom\";\nimport './App.css';\nimport ProgressBar from './components/ProgressBar'\nimport Sidebar from './components/Sidebar'\nimport Home from './views/Home'\nimport Post from './views/Post'\nimport About from './views/About'\nimport useScroll from './hooks/useScroll'\nimport { scrollSmoothTo } from './utils'\n\nfunction BackToTop () {\n  return (\n    <div className='back-to-top' onClick={() => scrollSmoothTo(document.documentElement, 0)}>\n      <i className=\"fa fa-fighter-jet\"></i>\n    </div>\n  )\n}\n\nexport default function App() {\n  const [scrollTop] = useScroll()\n\n  return (\n    <Router>\n      <div className='app'>\n        <ProgressBar/>\n        <main className='main'>\n          <Sidebar/>\n          <Switch>\n            <Route exact path=\"/\" component={Home}/>\n            <Route path=\"/post/:id\" component={Post}/>\n            <Route path=\"/about\" component={About}/>\n          </Switch>\n        </main>\n        {\n          scrollTop > 800 && <BackToTop />\n        }\n      </div>\n    </Router>\n  )\n};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport 'highlight.js/styles/dark.css'\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}